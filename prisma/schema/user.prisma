model User {
  id                 String               @id @default(uuid())
  email              String               @unique
  password           String
  role               UserRole             @default(PARTICIPATOR)
  needPasswordChange Boolean              @default(true)
  status             UserStatus           @default(ACTIVE)
  createdAt          DateTime             @default(now())
  updatedAt          DateTime             @updatedAt

  // RELATIONS
  admin              Admin?
  host               Host?
  participator       Participator?

  events             Event[]              @relation("UserEvents")
  reviews            Review[]             @relation("UserReviews")
  payments           Payment[]            @relation("UserPayments")
  eventParticipations EventParticipator[] @relation("UserEventParticipations")

  @@map("users")
}

// =======================
// ADMIN MODEL
// =======================
model Admin {
  id            String   @id @default(uuid())
  name          String
  email         String   @unique
  profilePhoto  String?
  contactNumber String
  isDeleted     Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  user User @relation(fields: [email], references: [email])

  @@map("admins")
}

// =======================
// HOST MODEL
// =======================
model Host {
  id            String   @id @default(uuid())
  name          String
  email         String   @unique
  profilePhoto  String?
  contactNumber String
  address       String
  isDeleted     Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  user    User    @relation(fields: [email], references: [email])
  events  Event[] @relation("HostEvents")

  @@map("hosts")
}

// =======================
// PARTICIPATOR MODEL
// =======================
model Participator {
  id           String   @id @default(uuid())
  email        String   @unique
  name         String
  profilePhoto String?
  address      String?
  interests    String?
  bio          String?
  isDeleted    Boolean  @default(false)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  user    User     @relation(fields: [email], references: [email])
  reviews Review[] @relation("ParticipatorReviews")

  @@map("participators")
}

// =======================
// EVENT MODEL
// =======================
model Event {
  id              String   @id @default(uuid())
  title           String
  description     String
  bannerPhoto     String?
  dateTime        DateTime
  location        String
  minParticipants Int?
  maxParticipants Int?
  joiningFee      Int
  eventType       String
  isDeleted       Boolean  @default(false)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  hostId          String?
  host            Host?    @relation("HostEvents", fields: [hostId], references: [id])

  createdByEmail  String
  user            User     @relation("UserEvents", fields: [createdByEmail], references: [email])

  participators   EventParticipator[]
  reviews         Review[]
  payments        Payment[]

  @@map("events")
}

// =======================
// EVENT PARTICIPATION (Many-to-Many)
// =======================
model EventParticipator {
  id          String   @id @default(uuid())
  eventId     String
  userId      String
  joinedAt    DateTime @default(now())

  event       Event @relation(fields: [eventId], references: [id])
  user        User  @relation("UserEventParticipations", fields: [userId], references: [id])

  @@unique([eventId, userId])
  @@map("event_participators")
}

// =======================
// REVIEWS
// =======================
model Review {
  id             String        @id @default(uuid())
  rating         Int
  comment        String?
  createdAt      DateTime      @default(now())

  eventId        String
  participatorId String
  userId         String?

  event          Event         @relation(fields: [eventId], references: [id])
  participator   Participator  @relation("ParticipatorReviews", fields: [participatorId], references: [id])
  user           User?         @relation("UserReviews", fields: [userId], references: [id])

  @@map("reviews")
}

// =======================
// PAYMENTS
// =======================
model Payment {
  id         String   @id @default(uuid())
  amount     Int
  status     String
  method     String
  createdAt  DateTime @default(now())

  eventId    String
  userId     String

  event      Event    @relation(fields: [eventId], references: [id])
  user       User     @relation("UserPayments", fields: [userId], references: [id])

  @@map("payments")
}