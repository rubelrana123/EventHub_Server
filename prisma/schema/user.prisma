// ...existing code...
model User {
  id                 String               @id @default(uuid())
  email              String               @unique
  password           String
  role               UserRole             @default(PARTICIPATOR)
  needPasswordChange Boolean              @default(true)
  status             UserStatus           @default(ACTIVE)
  createdAt          DateTime             @default(now())
  updatedAt          DateTime             @updatedAt

  // RELATIONS
  // One-to-one (optional): A User may have one Admin profile
  admin              Admin?
  // One-to-one (optional): A User may have one Host profile
  host               Host?
  // One-to-one (optional): A User may have one Participator profile
  participator       Participator?

  // One-to-many: A User (creator) can create many Events
  events             Event[]              @relation("UserEvents")
  // One-to-many: A User can write many Reviews
  reviews            Review[]             @relation("UserReviews")
  // One-to-many: A User can have many Payments
  payments           Payment[]            @relation("UserPayments")
  // Many-to-many (explicit join model): A User can participate in many Events via EventParticipator
  eventParticipations EventParticipator[] @relation("UserEventParticipations")

  @@map("users")
}

// =======================
// ADMIN MODEL
// =======================
model Admin {
  id            String   @id @default(uuid())
  name          String
  email         String   @unique
  profilePhoto  String?
  contactNumber String
  isDeleted     Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  // One-to-one: Admin links to exactly one User (by email). This is the inverse of User.admin.
  user User @relation(fields: [email], references: [email])

  @@map("admins")
}

// =======================
// HOST MODEL
// =======================
model Host {
  id            String   @id @default(uuid())
  name          String
  email         String   @unique
  profilePhoto  String?
  contactNumber String
  address       String
  isDeleted     Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  // One-to-one: Host profile belongs to one User (by email)
  user    User    @relation(fields: [email], references: [email])
  // One-to-many: A Host can host many Events
  events  Event[] @relation("HostEvents")

  @@map("hosts")
}

// =======================
// PARTICIPATOR MODEL
// =======================
model Participator {
  id           String   @id @default(uuid())
  email        String   @unique
  name         String
  profilePhoto String?
  address      String?
  interests    String?
  bio          String?
  isDeleted    Boolean  @default(false)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  // One-to-one: Participator profile belongs to one User (by email)
  user    User     @relation(fields: [email], references: [email])

  // One-to-many: A Participator can have many Reviews about them
  reviews Review[] @relation("ParticipatorReviews")
  event_participators EventParticipator[]
  @@map("participators")
}

// =======================
// EVENT MODEL
// =======================
model Event {
  id              String   @id @default(uuid())
  title           String
  description     String
  bannerPhoto     String?
  dateTime        DateTime
  location        String
  minParticipants Int?
  maxParticipants Int?
  joiningFee      Int
  eventType       String
  isDeleted       Boolean  @default(false)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  hostId          String?
  // Many-to-one (optional): Many Events can belong to one Host
  host            Host?    @relation("HostEvents", fields: [hostId], references: [id])

  createdByEmail  String
  // Many-to-one: Many Events can be created by one User (creator)
  user            User     @relation("UserEvents", fields: [createdByEmail], references: [email])

  // Many-to-many (explicit join model): Events have many Participators via EventParticipator
  participators   EventParticipator[]
  // One-to-many: An Event can have many Reviews
  reviews         Review[]
  // One-to-many: An Event can have many Payments
  payments        Payment[]

  @@map("events")
}

// =======================
// EVENT PARTICIPATION (Many-to-Many)
// =======================
model EventParticipator {
  id          String   @id @default(uuid())
  eventId     String
  userId      String
  joinedAt    DateTime @default(now())

  // Many-to-one: Many EventParticipator entries belong to one Event
  event       Event @relation(fields: [eventId], references: [id])
  // Many-to-one: Many EventParticipator entries belong to one User
  user        User  @relation("UserEventParticipations", fields: [userId], references: [id])

  // Composite unique ensures a User can't join the same Event twice.
  @@unique([eventId, userId])
  @@map("event_participators")
}

// =======================
// REVIEWS
// =======================
model Review {
  id             String        @id @default(uuid())
  rating         Int
  comment        String?
  createdAt      DateTime      @default(now())

  eventId        String
  participatorId String
  userId         String?

  // Many-to-one: Many Reviews belong to one Event
  event          Event         @relation(fields: [eventId], references: [id])
  // Many-to-one: Many Reviews can be about one Participator
  participator   Participator  @relation("ParticipatorReviews", fields: [participatorId], references: [id])
  // Many-to-one (optional): A Review may be authored by a User
  user           User?         @relation("UserReviews", fields: [userId], references: [id])

  @@map("reviews")
}

// =======================
// PAYMENTS
// =======================
model Payment {
  id         String   @id @default(uuid())
  amount     Int
  status     String
  method     String
  createdAt  DateTime @default(now())

  eventId    String
  userId     String

  // Many-to-one: Many Payments belong to one Event
  event      Event    @relation(fields: [eventId], references: [id])
  // Many-to-one: Many Payments belong to one User
  user       User     @relation("UserPayments", fields: [userId], references: [id])

  @@map("payments")
}
// ...existing code...